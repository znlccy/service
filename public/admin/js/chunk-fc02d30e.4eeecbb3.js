(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-fc02d30e"],{"11d9":function(e,t,a){"use strict";function i(e){return i=Object.getPrototypeOf||function(e){return e.__proto__},i(e)}a.d(t,"a",function(){return i})},2395:function(e,t,a){},"4fa7":function(e,t,a){"use strict";a.d(t,"a",function(){return r});var i=a("c665"),l=a("aa9a"),n=a("4a2d"),r=function(){function e(){Object(i["a"])(this,e)}return Object(l["a"])(e,null,[{key:"index",value:function(e,t,a){n["a"].request(this.uri()+"index",t,a,e)}},{key:"save",value:function(e,t,a){n["a"].request(this.uri()+"save",t,a,e)}},{key:"detail",value:function(e,t,a){n["a"].request(this.uri()+"detail",t,a,e)}},{key:"delete",value:function(e,t,a){n["a"].request(this.uri()+"delete",t,a,e)}},{key:"select",value:function(e,t,a){n["a"].request(this.uri()+"select",t,a,e)}},{key:"uri",value:function(){return n["a"].url()+"workplace/"}}]),e}()},"79ec":function(e,t,a){"use strict";var i=a("2395"),l=a.n(i);l.a},8443:function(e,t,a){"use strict";a.d(t,"a",function(){return r});var i=a("c665"),l=a("aa9a"),n=a("4a2d"),r=function(){function e(){Object(i["a"])(this,e)}return Object(l["a"])(e,null,[{key:"index",value:function(e,t,a){n["a"].request(this.uri()+"index",t,a,e)}},{key:"save",value:function(e,t,a){n["a"].request(this.uri()+"save",t,a,e)}},{key:"detail",value:function(e,t,a){n["a"].request(this.uri()+"detail",t,a,e)}},{key:"delete",value:function(e,t,a){n["a"].request(this.uri()+"delete",t,a,e)}},{key:"select",value:function(e,t){n["a"].request(this.uri()+"select",e,t)}},{key:"uri",value:function(){return n["a"].url()+"space/"}}]),e}()},"9aad":function(e,t,a){"use strict";a.d(t,"a",function(){return c});var i=a("c665"),l=a("dc0a"),n=a("aa9a"),r=a("d328"),o=a("11d9"),s=a("4a2d"),c=function(e){function t(){return Object(i["a"])(this,t),Object(r["a"])(this,Object(o["a"])(t).apply(this,arguments))}return Object(n["a"])(t,null,[{key:"index",value:function(e,t,a){s["a"].request(this.uri()+"index",t,a,e)}},{key:"save",value:function(e,t,a){s["a"].request(this.uri()+"save",t,a,e)}},{key:"detail",value:function(e,t,a){s["a"].request(this.uri()+"detail",t,a,e)}},{key:"progress",value:function(e,t,a){s["a"].request(this.uri()+"progress",t,a,e)}},{key:"copy",value:function(e,t){s["a"].request(this.uri()+"copy",e,t)}},{key:"delete",value:function(e,t,a){s["a"].request(this.uri()+"delete",t,a,e)}},{key:"uri",value:function(){return s["a"].url()+"order/"}}]),Object(l["a"])(t,e),t}(s["a"])},a981:function(e,t,a){"use strict";a.d(t,"a",function(){return r});var i=a("c665"),l=a("aa9a"),n=a("4a2d"),r=function(){function e(){Object(i["a"])(this,e)}return Object(l["a"])(e,null,[{key:"index",value:function(e,t,a){n["a"].request(this.uri()+"index",t,a,e)}},{key:"save",value:function(e,t,a){n["a"].request(this.uri()+"save",t,a,e)}},{key:"detail",value:function(e,t,a){n["a"].request(this.uri()+"detail",t,a,e)}},{key:"delete",value:function(e,t,a){n["a"].request(this.uri()+"delete",t,a,e)}},{key:"select",value:function(e,t){n["a"].request(this.uri()+"select",e,t)}},{key:"uri",value:function(){return n["a"].url()+"enter_team/"}}]),e}()},d328:function(e,t,a){"use strict";var i=a("6bde");function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function n(e,t){return!t||"object"!==Object(i["a"])(t)&&"function"!==typeof t?l(e):t}a.d(t,"a",function(){return n})},db1f:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("h3",[e._v("订单信息编辑")]),a("Divider",{attrs:{orientation:"left"}},[e._v("信息填写")]),a("Row",[a("Col",{attrs:{xs:24,sm:24,md:24,lg:24}},[a("Form",{attrs:{model:e.formData,"label-width":120}},[a("FormItem",{staticStyle:{display:"inline-block",width:"51%","margin-bottom":"0"},attrs:{label:"选择团队:"}},[a("Select",{model:{value:e.formData.team_id,callback:function(t){e.$set(e.formData,"team_id",t)},expression:"formData.team_id"}},e._l(e.teams,function(e,t){return a("Option",{key:t,attrs:{label:e.company,value:e.id}})})),e._v("\n          如需创建新的团队，您可"),a("a",[e._v(" 前往团队维护创建>")])],1),a("Divider"),e._l(e.workplaces,function(t,i){return a("div",{key:i,staticStyle:{"margin-top":"30px"}},[a("FormItem",{staticStyle:{display:"inline-block",width:"25%"},attrs:{label:"选择空间:"}},[a("Select",{on:{"on-change":function(a){e.selectPlace(t)}},model:{value:t.space_id,callback:function(a){e.$set(t,"space_id",a)},expression:"item.space_id"}},e._l(t.spaces,function(e,t){return a("Option",{key:t,attrs:{label:e.name,value:e.id}})}))],1),a("FormItem",{directives:[{name:"show",rawName:"v-show",value:0===t.type,expression:"item.type===0"}],staticStyle:{display:"inline-block",width:"25%"},attrs:{label:"选择工位:"}},[a("Select",{attrs:{multiple:"",loading:e.loadSpaceIng,"loading-text":"加载中"},on:{"on-change":function(a){e.selectIdWork(t)}},model:{value:t.workplaceIds,callback:function(a){e.$set(t,"workplaceIds",a)},expression:"item.workplaceIds"}},e._l(t.workplaces,function(t,i){return a("Option",{key:i,attrs:{disabled:e.itemDisable(t.id),label:t.workplace_no,value:t.id}})}))],1),a("FormItem",{directives:[{name:"show",rawName:"v-show",value:1===t.type,expression:"item.type===1"}],staticStyle:{display:"inline-block",width:"25%"},attrs:{label:"选择工位:"}},[a("Select",{attrs:{loading:e.loadSpaceIng,"loading-text":"加载中"},on:{"on-change":function(a){e.selectAreaWork(t)}},model:{value:t.workplaceArea,callback:function(a){e.$set(t,"workplaceArea",a)},expression:"item.workplaceArea"}},e._l(t.workplaces,function(t,i){return a("Option",{key:i,attrs:{disabled:e.itemDisable(t.id),label:t.workplace_no,value:i}})}))],1),a("RadioGroup",{staticStyle:{width:"15%","margin-left":"1%"},on:{"on-change":function(a){e.selectPlace(t)}},model:{value:t.type,callback:function(a){e.$set(t,"type",a)},expression:"item.type"}},[a("Radio",{attrs:{label:0}},[a("span",[e._v("按工位")])]),a("Radio",{attrs:{label:1}},[a("span",[e._v("按面积")])])],1),t.areaSelect?a("FormItem",{staticStyle:{display:"inline-block",width:"20%"},attrs:{label:"输入面积:"}},[a("InputNumber",{attrs:{max:t.areaSelect.max_area,min:1},on:{"on-change":e.setPrice},model:{value:t.areaSelect.area,callback:function(a){e.$set(t.areaSelect,"area",a)},expression:"item.areaSelect.area"}})],1):e._e(),0===i?a("a",{staticStyle:{"margin-left":"10px","line-height":"35px"},on:{click:function(t){e.add()}}},[e._v(" 添加新的工位>")]):e._e(),0!==i?a("a",{staticStyle:{"margin-left":"10px","line-height":"35px"},on:{click:function(t){e.del(i)}}},[e._v(" 删除>")]):e._e()],1)}),a("Divider"),a("div",[a("FormItem",{staticStyle:{display:"inline-block",width:"51%"},attrs:{label:"合同模板:"}},[a("Select",{on:{"on-change":e.selectTemplate},model:{value:e.selectTemplateIndex,callback:function(t){e.selectTemplateIndex=t},expression:"selectTemplateIndex"}},e._l(e.templates,function(e,t){return a("Option",{key:t,attrs:{label:e.name,value:t}})}))],1),null!=e.formData.custom_content?a("div",{staticStyle:{"margin-top":"-30px"}},[a("Divider",{attrs:{orientation:"left"}},[e._v(" 自定义变量")]),e._l(e.formData.custom_content,function(t,i){return a("FormItem",{key:i,staticStyle:{width:"50%"},attrs:{label:t.name}},[a("Input",{attrs:{placeholder:"请填写变量"},model:{value:t.placeholder,callback:function(a){e.$set(t,"placeholder",a)},expression:"item.placeholder"}})],1)})],2):e._e(),a("Divider"),a("FormItem",{staticStyle:{display:"inline-block",width:"51%"},attrs:{label:"合同年限:"}},[a("InputNumber",{staticStyle:{width:"100%"},attrs:{min:1},model:{value:e.formData.contract_years,callback:function(t){e.$set(e.formData,"contract_years",t)},expression:"formData.contract_years"}})],1),a("FormItem",{staticStyle:{display:"inline-block",width:"51%"},attrs:{label:"起租时间:"}},[a("DatePicker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择时间"},model:{value:e.formData.startTime,callback:function(t){e.$set(e.formData,"startTime",t)},expression:"formData.startTime"}})],1),a("FormItem",{staticStyle:{display:"inline-block",width:"51%"},attrs:{label:"付款方式:"}},[a("Select",{model:{value:e.formData.pay_type,callback:function(t){e.$set(e.formData,"pay_type",t)},expression:"formData.pay_type"}},[a("Option",{attrs:{value:1,label:"月付"}}),a("Option",{attrs:{value:2,label:"季付"}}),a("Option",{attrs:{value:3,label:"半年付"}}),a("Option",{attrs:{value:4,label:"年付"}}),a("Option",{attrs:{value:5,label:"金额"}})],1)],1),a("FormItem",{staticStyle:{display:"inline-block",width:"51%"},attrs:{label:"定金:"}},[a("InputNumber",{staticStyle:{width:"100%"},attrs:{min:0},on:{"on-change":e.setPrice},model:{value:e.formData.deposit,callback:function(t){e.$set(e.formData,"deposit",t)},expression:"formData.deposit"}})],1)],1),a("Divider"),a("div",[a("FormItem",{attrs:{label:"开具类型"}},[a("RadioGroup",{on:{"on-change":function(t){e.selectOpenerType()}},model:{value:e.formData.opener_type,callback:function(t){e.$set(e.formData,"opener_type",t)},expression:"formData.opener_type"}},[a("Radio",{attrs:{label:1}},[a("span",[e._v("个人")])]),a("Radio",{attrs:{label:2}},[a("span",[e._v("企业")])])],1)],1),1===e.formData.opener_type?a("div",[a("FormItem",{attrs:{label:"发票抬头"}},[e._v("个人")]),a("FormItem",{attrs:{label:"发票类型"}},[e._v("增值税普通发票")])],1):e._e(),2===e.formData.opener_type?a("div",[a("FormItem",{staticStyle:{width:"51%"},attrs:{label:"发票抬头"}},[a("Input",{attrs:{placeholder:"请填写发票抬头"},model:{value:e.formData.invoice_title,callback:function(t){e.$set(e.formData,"invoice_title",t)},expression:"formData.invoice_title"}})],1),a("FormItem",{attrs:{label:"发票类型"}},[a("RadioGroup",{model:{value:e.formData.invoice_type,callback:function(t){e.$set(e.formData,"invoice_type",t)},expression:"formData.invoice_type"}},[a("Radio",{attrs:{label:1}},[e._v("企业增值税普通发票")]),a("Radio",{attrs:{label:2}},[e._v("增值税专用发票")]),a("Radio",{attrs:{label:3}},[e._v("组织增值税普通发票")])],1)],1),a("FormItem",{staticStyle:{width:"51%"},attrs:{label:"税务登记证号"}},[a("Input",{attrs:{placeholder:"请填写税务登记证号"},model:{value:e.formData.tax,callback:function(t){e.$set(e.formData,"tax",t)},expression:"formData.tax"}})],1),a("FormItem",{staticStyle:{width:"51%"},attrs:{label:"基本开户银行名称"}},[a("Input",{attrs:{placeholder:"请填写基本开户银行名称"},model:{value:e.formData.bank,callback:function(t){e.$set(e.formData,"bank",t)},expression:"formData.bank"}})],1),a("FormItem",{staticStyle:{width:"51%"},attrs:{label:"基本开户账号"}},[a("Input",{attrs:{placeholder:"请填写基本开户账号"},model:{value:e.formData.account,callback:function(t){e.$set(e.formData,"account",t)},expression:"formData.account"}})],1),a("FormItem",{staticStyle:{width:"51%"},attrs:{label:"注册场所地址"}},[a("Input",{attrs:{placeholder:"请填写注册场所地址"},model:{value:e.formData.address,callback:function(t){e.$set(e.formData,"address",t)},expression:"formData.address"}})],1),a("FormItem",{staticStyle:{width:"51%"},attrs:{label:"注册固定电话"}},[a("Input",{attrs:{placeholder:"请填写注册固定电话"},model:{value:e.formData.phone,callback:function(t){e.$set(e.formData,"phone",t)},expression:"formData.phone"}})],1)],1):e._e()],1),a("Divider"),a("div",[a("FormItem",{staticStyle:{width:"51%"},attrs:{label:"优惠金额"}},[a("InputNumber",{staticStyle:{width:"100%"},attrs:{min:0},model:{value:e.formData.discount,callback:function(t){e.$set(e.formData,"discount",t)},expression:"formData.discount"}})],1),a("FormItem",{staticStyle:{width:"51%"},attrs:{label:"备注"}},[a("Input",{attrs:{type:"textarea",placeholder:"请填写备注"},model:{value:e.formData.remark,callback:function(t){e.$set(e.formData,"remark",t)},expression:"formData.remark"}})],1)],1),a("Divider"),a("FormItem",{staticStyle:{width:"51%"},attrs:{label:"抄送人"}},[a("Select",{attrs:{multiple:""},model:{value:e.formData.copy_ids,callback:function(t){e.$set(e.formData,"copy_ids",t)},expression:"formData.copy_ids"}},e._l(e.copies,function(e,t){return a("Option",{key:t,attrs:{label:e.nickname,value:e.id}})}))],1),a("Divider"),a("FormItem",{staticStyle:{width:"100%"},attrs:{label:"订单总价"}},[a("h1",{staticStyle:{display:"inline-block"}},[e._v("￥"+e._s(e.formData.total_price))]),a("h3",{staticStyle:{"margin-left":"20px",display:"inline-block"}},[e._v("优惠金额￥"+e._s(e.formData.discount))]),a("Button",{staticStyle:{"margin-left":"20px"},attrs:{type:"success"},on:{click:function(t){e.submit()}}},[e._v("保存")])],1)],2),e.load?a("Spin",{attrs:{size:"large",fix:""}}):e._e()],1)],1)],1)},l=[],n=(a("ac6a"),a("9aad")),r=a("a981"),o=a("8443"),s=a("4fa7"),c=a("fc38"),u={name:"edit",data:function(){return{formData:{opener_type:2,discount:0,total_price:0,deposit:0,contract_years:1},load:!1,spaces:[],templates:[],teams:[],workplaces:[],loadSpaceIng:!1,selectIds:[],selectTemplateIndex:null,copies:[]}},mounted:function(){null!=this.$route.query.id&&this.loadData(),this.loadTeam(),this.loadSpace(),this.loadTemplates(),this.loadCopy()},methods:{loadData:function(){this.load=!0,n["a"].detail({id:this.$route.query.id},function(e){},function(){})},selectOpenerType:function(){1===this.formData.opener_type?(this.formData.invoice_title="个人",this.formData.invoice_type=2):(this.formData.invoice_title=null,this.formData.invoice_type=null)},selectTemplate:function(){console.log(this.selectTemplateIndex);var e=this.templates[this.selectTemplateIndex];this.formData.contract_template_no=e.template_no,this.formData.custom_content=e.content},loadCopy:function(){var e=this;n["a"].copy(function(t){e.copies=t.data.data})},loadTemplates:function(){var e=this;c["a"].select(function(t){e.templates=t.data.data})},loadTeam:function(){var e=this;r["a"].select(function(t){e.teams=t.data.data})},loadSpace:function(){var e=this;o["a"].select(function(t){e.spaces=t.data.data,e.workplaces.push({spaces:e.spaces,type:0})})},selectIdWork:function(e){this.setIds()},selectAreaWork:function(e){0!==e.type&&(e.areaSelect=e.workplaces[e.workplaceArea],e.areaSelect.area=1,this.$set(e,e),console.log(e),this.setIds())},itemDisable:function(e){for(var t=0;t<this.selectIds.length;t++)if(e===this.selectIds[t])return!0;return!1},setIds:function(){this.setPrice();var e=[];this.workplaces.forEach(function(t){0===t.type&&null!=t.workplaceIds?e=e.concat(t.workplaceIds):1===t.type&&null!=t.areaSelect&&e.push(t.areaSelect.id)}),this.selectIds=e},setPrice:function(){var e=this,t=0;this.workplaces.forEach(function(a){0===a.type&&null!=a.workplaceIds?a.workplaceIds.forEach(function(i){a.workplaces.forEach(function(a){a.id===i&&(t+=e.$formUtil.isStrValid(a.price)?parseFloat(a.price):0)})}):1===a.type&&null!=a.areaSelect&&(t+=(e.$formUtil.isStrValid(a.areaSelect.price)?parseFloat(a.areaSelect.price):0)*(e.$formUtil.isStrValid(a.areaSelect.area)?parseFloat(a.areaSelect.area):0))}),t+=this.$formUtil.isStrValid(this.formData.deposit)?parseFloat(this.formData.deposit):0,this.formData.total_price=t},selectPlace:function(e){var t=this;null!=e.space_id&&(this.$set(e,"workplaceIds",null),this.$set(e,"workplaceArea",null),this.$set(e,"areaSelect",null),s["a"].select({space_id:e.space_id,type:e.type},function(a){t.$set(e,"workplaces",a.data.data)}),this.setIds())},del:function(e){this.workplaces.splice(e,1),this.setIds()},add:function(){var e=this.workplaces[this.workplaces.length-1];0===e.type&&null==e.workplaceIds||1===e.type&&null==e.areaSelect?this.$Message.error("请将上一条填写完整"):this.workplaces.push({spaces:this.spaces,type:0})},submit:function(){var e=this,t=this.$formUtil.deepCopy(this.formData);if(this.$formUtil.isStrValid(t.team_id))if(this.$formUtil.isStrValid(this.selectIds)){var a=[];this.workplaces.forEach(function(e){0===e.type&&null!=e.workplaceIds?e.workplaceIds.forEach(function(e){a.push({workplace_id:e})}):1===e.type&&null!=e.areaSelect&&a.push({workplace_id:e.areaSelect.id,workplace_area:e.areaSelect.area})}),t.workplaces=a,null!=t.custom_content&&(t.custom_content=JSON.stringify(t.custom_content)),this.load=!0,n["a"].save(t,function(){e.load=!1,e.$router.push({name:"contract_template"})},function(){e.load=!1})}else this.$Message.error("请至少选择一个工位");else this.$Message.error("请选择入住团队")}}},d=u,p=(a("79ec"),a("2877")),f=Object(p["a"])(d,i,l,!1,null,"7a4d639a",null);f.options.__file="edit.vue";t["default"]=f.exports},dc0a:function(e,t,a){"use strict";function i(e,t){return i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},i(e,t)}function l(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");i(e.prototype,t&&t.prototype),t&&i(e,t)}a.d(t,"a",function(){return l})},fc38:function(e,t,a){"use strict";a.d(t,"a",function(){return r});var i=a("c665"),l=a("aa9a"),n=a("4a2d"),r=function(){function e(){Object(i["a"])(this,e)}return Object(l["a"])(e,null,[{key:"index",value:function(e,t,a){n["a"].request(this.uri()+"index",t,a,e)}},{key:"save",value:function(e,t,a){n["a"].request(this.uri()+"save",t,a,e)}},{key:"detail",value:function(e,t,a){n["a"].request(this.uri()+"detail",t,a,e)}},{key:"delete",value:function(e,t,a){n["a"].request(this.uri()+"delete",t,a,e)}},{key:"select",value:function(e,t){n["a"].request(this.uri()+"select",e,t)}},{key:"uri",value:function(){return n["a"].url()+"contract_template/"}}]),e}()}}]);
//# sourceMappingURL=chunk-fc02d30e.4eeecbb3.js.map