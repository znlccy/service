(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3ddcf2f2"],{"1dee":function(e,t,n){"use strict";n.d(t,"a",function(){return s});var a=n("c665"),i=n("aa9a"),o=n("4a2d"),s=function(){function e(){Object(a["a"])(this,e)}return Object(i["a"])(e,null,[{key:"index",value:function(e,t,n){o["a"].request(this.uri()+"index",t,n,e)}},{key:"select",value:function(e,t,n){o["a"].request(this.uri()+"select",t,n,e)}},{key:"save",value:function(e,t,n){o["a"].request(this.uri()+"save",t,n,e)}},{key:"detail",value:function(e,t,n){o["a"].request(this.uri()+"detail",t,n,e)}},{key:"delete",value:function(e,t,n){o["a"].request(this.uri()+"delete",t,n,e)}},{key:"member",value:function(e,t,n){o["a"].request(this.uri()+"member",t,n,e)}},{key:"selectDepartment",value:function(e,t,n){o["a"].request(this.uri()+"select_department",t,n,e)}},{key:"selectMember",value:function(e,t,n){o["a"].request(this.uri()+"select_member",t,n,e)}},{key:"leader",value:function(e,t,n){o["a"].request(this.uri()+"leader",t,n,e)}},{key:"uri",value:function(){return o["a"].url()+"department/"}}]),e}()},"24ab":function(e,t,n){"use strict";var a=n("f77a"),i=n.n(a);i.a},2621:function(e,t){t.f=Object.getOwnPropertySymbols},"52a7":function(e,t){t.f={}.propertyIsEnumerable},"56e0":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("h3",[e._v(" 部门管理")]),n("Divider",{attrs:{orientation:"left"}},[e._v("部门详情")]),n("Row",{staticStyle:{"margin-left":"50px"}},[n("Col",{attrs:{span:6}},[n("Card",[n("div",{staticStyle:{"text-align":"right"}},[n("Button",{attrs:{type:"primary",shape:"circle",icon:"md-add"},on:{click:function(t){e.add(0)}}})],1),n("Tree",{attrs:{data:e.columns,render:e.renderContent}})],1),e.load?n("Spin",{attrs:{size:"large",fix:""}}):e._e()],1),n("Col",{attrs:{span:1}},[e._v("\n       \n    ")]),n("Col",{attrs:{span:17}},[n("Card",[n("Divider",{attrs:{orientation:"left"}},[e._v("人员管理")]),n("Table",{attrs:{stripe:"",border:"",columns:e.mansColumns,data:e.mans.data}}),e.loadManIng?n("Spin",{attrs:{size:"large",fix:""}}):e._e(),e.mans.last_page>1?n("Row",{staticStyle:{"text-align":"center","margin-top":"20px"}},[n("Page",{attrs:{total:e.mans.total,"page-size":e.mans.per_page,current:e.mans.current_page,size:"small"},on:{"on-change":function(t){e.loadMans()}}})],1):e._e()],1)],1)],1)],1)},i=[],o=(n("7f7f"),n("ac6a"),n("f751"),n("1dee")),s={name:"index",data:function(){var e=this;return{formData:{},listData:{},mans:{},mansColumns:[{title:"创建日期",align:"center",key:"create_time"},{title:"姓名",align:"center",render:function(e,t){return e("span",t.row.user.nickname)}},{title:"角色",key:"role",align:"center",render:function(t,n){return t("div",[t("span",0===n.row.role?"成员":"负责人"),t("Button",{props:{type:"success",size:"small"},style:{marginLeft:"5px",display:0===n.row.role?"":"none"},on:{click:function(){o["a"].leader({id:n.row.user.id},function(){e.loadMans()})}}},"设置为负责人")])}}],load:!1,loadManIng:!1,columns:[],selectItem:{}}},activated:function(){this.loadData()},methods:{loadData:function(){var e=this;this.load=!0,this.ref(),console.log("-----"),o["a"].index(this.formData,function(t){e.listData=t.data.data,e.load=!1,e.initTree(e.listData,e.columns),e.columns[0].selectItem=!0,e.selectItem=e.columns[0],e.loadMans(1)},function(){e.load=!1})},renderContent:function(e,t){var n=this,a=(t.root,t.node,t.data);return e("span",{style:{display:"inline-block",width:"100%"}},[e("span",[e("span",{class:"tree-item ".concat(a.selectItem?"tree-select-item":""),style:{},on:{click:function(){n.$set(n.selectItem,"selectItem",!1),n.$set(a,"selectItem",!0),n.selectItem=a,n.loadMans(1)}}},a.title)]),e("span",{style:{display:"inline-block",float:"right",marginRight:"32px"}},[e("Button",{props:Object.assign({},{icon:"ios-create-outline"}),style:{marginRight:"8px",padding:"0",border:"none",fontSize:"1.2rem"},on:{click:function(){n.edit(a)}}}),e("Button",{props:Object.assign({},{icon:"ios-add-circle-outline"}),style:{marginRight:"8px",padding:"0",border:"none",fontSize:"1.2rem"},on:{click:function(){n.add(a.id)}}}),e("Button",{props:Object.assign({},{icon:"ios-remove-circle-outline"}),style:{padding:"0",border:"none",fontSize:"1.2rem"},on:{click:function(){n.del(a)}}})])])},initTree:function(e,t){var n=this;null!=e&&e.length>0&&e.forEach(function(e){var a={title:e.name,description:e.description,id:e.id,selectItem:!1,expand:!0,children:[]};null!=e.son&&n.initTree(e.son,a.children),t.push(a)})},edit:function(e){var t=this;this.name=e.title,this.description=e.description,this.$Modal.confirm({title:"请填写资料",okText:"确定",cancelText:"取消",loading:!0,onOk:function(){o["a"].save({name:t.name,description:t.description,id:e.id},function(){t.$Modal.remove(),t.$Modal.loading=!1,t.$Message.success("添加成功"),t.loadData(),t.name="",t.description=""},function(){t.$Modal.remove(),t.name="",t.description=""})},onCancel:function(){t.name="",t.description=""},render:function(e){return e("div",{},[e("Input",{props:{value:t.name,autofocus:!0,placeholder:"请输入部门名称"},on:{input:function(e){t.name=e}}}),e("Input",{props:{value:t.description,autofocus:!0,placeholder:"请输入部门简介",type:"textarea"},style:{marginTop:"10px"},on:{input:function(e){t.description=e}}})])}})},add:function(e){var t=this;this.$Modal.confirm({title:"请填写资料",okText:"确定",cancelText:"取消",loading:!0,onOk:function(){o["a"].save({name:t.name,description:t.description,p_id:e},function(){t.$Modal.remove(),t.$Modal.loading=!1,t.$Message.success("添加成功"),t.loadData(),t.name="",t.description=""},function(){t.$Modal.remove(),t.name="",t.description=""})},onCancel:function(){t.name="",t.description=""},render:function(e){return e("div",{},[e("Input",{props:{value:t.name,autofocus:!0,placeholder:"请输入部门名称"},on:{input:function(e){t.name=e}}}),e("Input",{props:{value:t.description,autofocus:!0,placeholder:"请输入部门简介",type:"textarea"},style:{marginTop:"10px"},on:{input:function(e){t.description=e}}})])}})},loadMans:function(e){var t=this;this.loadManIng=!0;var n={id:this.selectItem.id};e&&(this.selectItem.jump_page=e),n.jump_page=this.selectItem.jump_page,o["a"].member(n,function(e){t.mans=e.data.data,t.loadManIng=!1},function(){t.loadManIng=!1})},ref:function(){this.columns=[],this.listData=[],this.selectItem={},this.formData={},this.mans={}},del:function(e){var t=this;this.$Modal.confirm({title:"确定删除"+e.title+"吗?",okText:"删除",cancelText:"取消",loading:!0,onOk:function(){o["a"].delete({id:e.id},function(){t.$Modal.remove(),t.$Message.success("删除成功"),t.loadData(1)},function(){t.$Modal.remove()})}})}}},r=s,c=(n("24ab"),n("2877")),l=Object(c["a"])(r,a,i,!1,null,null,null);l.options.__file="index.vue";t["default"]=l.exports},7333:function(e,t,n){"use strict";var a=n("0d58"),i=n("2621"),o=n("52a7"),s=n("4bf8"),r=n("626a"),c=Object.assign;e.exports=!c||n("79e5")(function(){var e={},t={},n=Symbol(),a="abcdefghijklmnopqrst";return e[n]=7,a.split("").forEach(function(e){t[e]=e}),7!=c({},e)[n]||Object.keys(c({},t)).join("")!=a})?function(e,t){var n=s(e),c=arguments.length,l=1,u=i.f,d=o.f;while(c>l){var p,f=r(arguments[l++]),m=u?a(f).concat(u(f)):a(f),h=m.length,v=0;while(h>v)d.call(f,p=m[v++])&&(n[p]=f[p])}return n}:c},f751:function(e,t,n){var a=n("5ca1");a(a.S+a.F,"Object",{assign:n("7333")})},f77a:function(e,t,n){}}]);
//# sourceMappingURL=chunk-3ddcf2f2.054119da.js.map