(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-69c14f16"],{"11d9":function(t,e,a){"use strict";function r(t){return r=Object.getPrototypeOf||function(t){return t.__proto__},r(t)}a.d(e,"a",function(){return r})},"1dee":function(t,e,a){"use strict";a.d(e,"a",function(){return o});var r=a("c665"),i=a("aa9a"),n=a("4a2d"),o=function(){function t(){Object(r["a"])(this,t)}return Object(i["a"])(t,null,[{key:"index",value:function(t,e,a){n["a"].request(this.uri()+"index",e,a,t)}},{key:"select",value:function(t,e,a){n["a"].request(this.uri()+"select",e,a,t)}},{key:"save",value:function(t,e,a){n["a"].request(this.uri()+"save",e,a,t)}},{key:"detail",value:function(t,e,a){n["a"].request(this.uri()+"detail",e,a,t)}},{key:"delete",value:function(t,e,a){n["a"].request(this.uri()+"delete",e,a,t)}},{key:"member",value:function(t,e,a){n["a"].request(this.uri()+"member",e,a,t)}},{key:"selectDepartment",value:function(t,e,a){n["a"].request(this.uri()+"select_department",e,a,t)}},{key:"selectMember",value:function(t,e,a){n["a"].request(this.uri()+"select_member",e,a,t)}},{key:"leader",value:function(t,e,a){n["a"].request(this.uri()+"leader",e,a,t)}},{key:"uri",value:function(){return n["a"].url()+"department/"}}]),t}()},"1f1b":function(t,e,a){"use strict";var r=a("6962"),i=a.n(r);i.a},"1f20":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("h3",[t._v("管理员信息编辑")]),a("Divider",{attrs:{orientation:"left"}},[t._v("信息填写")]),a("Row",[a("Col",{attrs:{xs:24,sm:24,md:12,lg:12}},[a("Form",{attrs:{model:t.formData,"label-width":80}},[this.$route.query.id?t._e():a("FormItem",{attrs:{label:"手机"}},[a("Input",{attrs:{placeholder:"请填写手机"},model:{value:t.formData.mobile,callback:function(e){t.$set(t.formData,"mobile",e)},expression:"formData.mobile"}})],1),this.$route.query.id?t._e():a("FormItem",{attrs:{label:"密码"}},[a("Input",{attrs:{placeholder:"请填写密码",type:"password"},model:{value:t.formData.password,callback:function(e){t.$set(t.formData,"password",e)},expression:"formData.password"}})],1),this.$route.query.id?t._e():a("FormItem",{attrs:{label:"确认密码"}},[a("Input",{attrs:{type:"password",placeholder:"请填写确认密码"},model:{value:t.formData.confirm_pass,callback:function(e){t.$set(t.formData,"confirm_pass",e)},expression:"formData.confirm_pass"}})],1),a("FormItem",{attrs:{label:"状态"}},[a("Select",{model:{value:t.formData.status,callback:function(e){t.$set(t.formData,"status",e)},expression:"formData.status"}},[a("Option",{attrs:{label:"禁用",value:0}}),a("Option",{attrs:{label:"正常",value:1}})],1)],1),a("FormItem",{attrs:{label:"真实姓名"}},[a("Input",{attrs:{placeholder:"请填写真实姓名"},model:{value:t.formData.real_name,callback:function(e){t.$set(t.formData,"real_name",e)},expression:"formData.real_name"}})],1),a("FormItem",{attrs:{label:"运营团队"}},[a("Select",{on:{"on-change":t.loadRoleAndDepartment},model:{value:t.formData.operation_team_id,callback:function(e){t.$set(t.formData,"operation_team_id",e)},expression:"formData.operation_team_id"}},t._l(t.teams,function(t,e){return a("Option",{key:e,attrs:{label:t.name,value:t.id}})}))],1),a("FormItem",{attrs:{label:"角色"}},[a("Select",{attrs:{multiple:""},model:{value:t.formData.role_id,callback:function(e){t.$set(t.formData,"role_id",e)},expression:"formData.role_id"}},t._l(t.roles,function(t,e){return a("Option",{key:e,attrs:{label:t.name,value:t.id}})}))],1),0===t.formData.operation_team_id?a("FormItem",{attrs:{label:"部门"}},[a("Cascader",{attrs:{data:t.departments,"change-on-select":""},model:{value:t.department,callback:function(e){t.department=e},expression:"department"}})],1):t._e(),a("FormItem",[a("Button",{attrs:{type:"success",long:""},on:{click:t.submit}},[t._v("提交")])],1)],1),t.load?a("Spin",{attrs:{size:"large",fix:""}}):t._e()],1)],1)],1)},i=[],n=(a("7f7f"),a("ac6a"),a("d371")),o=a("1dee"),s=a("8427"),u={name:"edit",data:function(){return{formData:{},teams:[],roles:[],departments:[],department:[],defaultDepartment:null,defaultDepartments:[],load:!1}},mounted:function(){this.loadTeam(),null!=this.$route.query.id&&this.loadData(),null!=this.$route.query.operation_team_id&&(this.formData.operation_team_id=parseInt(this.$route.query.operation_team_id))},methods:{loadTeam:function(){var t=this;n["a"].select(function(e){console.assert(e),t.teams=e.data.data})},loadRoleAndDepartment:function(t){var e=this;s["a"].role({operation_team_id:t},function(t){e.roles=t.data.data}),this.formData.role_id=[],this.formData.department_id=[],0===t&&o["a"].select({operation_team_id:t},function(t){e.initDepartment(e.departments,t.data.data),null!=e.$route.query.id&&null==e.defaultDepartment&&(e.defaultDepartments=t.data.data,e.initDefaultDepartment(e.formData.department.id,e.defaultDepartments),e.department=e.department.reverse())})},initDefaultDepartment:function(t,e){var a=this,r=this;e.forEach(function(e){if(e.id===t)return r.department.push(e.id),void(0!==e.p_id&&r.initDefaultDepartment(e.p_id,a.defaultDepartments));null!=e.child&&r.initDefaultDepartment(t,e.child)})},initDepartment:function(t,e){var a=this;e.forEach(function(e){var r={value:e.id,label:e.name,children:[]};null!=e.child&&a.initDepartment(r.children,e.child),t.push(r)})},loadData:function(){var t=this;this.load=!0,s["a"].detail({id:this.$route.query.id},function(e){t.load=!1,e.data.data.operation_team&&(e.data.data.operation_team_id=e.data.data.operation_team.id),e.data.data.department&&(e.data.data.department_id=e.data.data.department.id),e.data.data.role&&(e.data.data.role_id=[],e.data.data.role.forEach(function(t){e.data.data.role_id.push(t.id)})),t.loadRoleAndDepartment(e.data.data.operation_team.id),t.formData=e.data.data},function(){t.load=!1})},submit:function(){var t=this;if(null===this.$route.query.id){if(!this.$formUtil.isStrValid(this.formData.mobile))return void this.$Message.error("请输入手机号");if(!this.$formUtil.isStrValid(this.formData.password))return void this.$Message.error("请输入密码");if(!this.$formUtil.isStrValid(this.formData.confirm_pass))return void this.$Message.error("请输入确认密码")}this.$formUtil.isStrValid(this.formData.real_name)?this.$formUtil.isStrValid(this.formData.operation_team_id)?null!=this.department&&0!==this.department.length?(this.formData.department_id=this.department[this.department.length-1],this.$formUtil.isStrValid(this.formData.role_id)?(this.load=!0,s["a"].assignUserRole(this.formData,function(e){t.load=!1,t.$router.back()},function(){t.load=!1})):this.$Message.error("请选择角色")):this.$Message.error("请选择部门"):this.$Message.error("请选择运营团队"):this.$Message.error("请输入真实姓名")}}},l=u,d=(a("1f1b"),a("2877")),c=Object(d["a"])(l,r,i,!1,null,"04d2015c",null);c.options.__file="edit.vue";e["default"]=c.exports},6962:function(t,e,a){},8427:function(t,e,a){"use strict";a.d(e,"a",function(){return l});var r=a("c665"),i=a("dc0a"),n=a("aa9a"),o=a("d328"),s=a("11d9"),u=a("4a2d"),l=function(t){function e(){return Object(r["a"])(this,e),Object(o["a"])(this,Object(s["a"])(e).apply(this,arguments))}return Object(n["a"])(e,null,[{key:"adminList",value:function(t,e,a){u["a"].request(this.uri()+"admin_list",e,a,t)}},{key:"roleList",value:function(t,e,a){u["a"].request(this.uri()+"role",e,a,t)}},{key:"create",value:function(t,e,a){u["a"].request(this.uri()+"create",e,a,t)}},{key:"detail",value:function(t,e,a){u["a"].request(this.uri()+"detail",e,a,t)}},{key:"role",value:function(t,e,a){u["a"].request(this.uri()+"role",e,a,t)}},{key:"spinner",value:function(t,e){u["a"].request(this.uri()+"spinner",t,e)}},{key:"assignUserRole",value:function(t,e,a){u["a"].request(this.uri()+"assign_user_role",e,a,t)}},{key:"pwd",value:function(t,e,a){u["a"].request(this.uri()+"change_password",e,a,t)}},{key:"info",value:function(t,e){u["a"].request(this.uri()+"info",t,e)}},{key:"uri",value:function(){return u["a"].url()+"admin/"}}]),Object(i["a"])(e,t),e}(u["a"])},d328:function(t,e,a){"use strict";var r=a("6bde");function i(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function n(t,e){return!e||"object"!==Object(r["a"])(e)&&"function"!==typeof e?i(t):e}a.d(e,"a",function(){return n})},d371:function(t,e,a){"use strict";a.d(e,"a",function(){return o});var r=a("c665"),i=a("aa9a"),n=a("4a2d"),o=function(){function t(){Object(r["a"])(this,t)}return Object(i["a"])(t,null,[{key:"select",value:function(t,e){n["a"].request(this.uri()+"select",t,e)}},{key:"index",value:function(t,e,a){n["a"].request(this.uri()+"index",e,a,t)}},{key:"save",value:function(t,e,a){n["a"].request(this.uri()+"save",e,a,t)}},{key:"delete",value:function(t,e,a){n["a"].request(this.uri()+"delete",e,a,t)}},{key:"detail",value:function(t,e,a){n["a"].request(this.uri()+"detail",e,a,t)}},{key:"leader",value:function(t,e,a){n["a"].request(this.uri()+"leader",e,a,t)}},{key:"flowDesign",value:function(t,e,a){n["a"].request(this.uri()+"flow_design",e,a,t)}},{key:"flowList",value:function(t,e,a){n["a"].request(this.uri()+"flow_list",e,a,t)}},{key:"uri",value:function(){return n["a"].url()+"operation_team/"}}]),t}()},dc0a:function(t,e,a){"use strict";function r(t,e){return r=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},r(t,e)}function i(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");r(t.prototype,e&&e.prototype),e&&r(t,e)}a.d(e,"a",function(){return i})}}]);
//# sourceMappingURL=chunk-69c14f16.487622a0.js.map