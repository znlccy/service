(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-086b5b88"],{"0b12":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",[a("label",{directives:[{name:"show",rawName:"v-show",value:0===t.pictures.length,expression:"pictures.length===0"}]},[a("span",{staticClass:"upload-img"}),a("input",{ref:"path",staticStyle:{display:"none"},attrs:{type:"file",accept:"image/*",multiple:""},on:{change:t.getFile}})]),t._l(t.pictures,function(e,i){return a("span",{directives:[{name:"show",rawName:"v-show",value:t.pictures,expression:"pictures"}],key:i,staticClass:"img-preview"},[a("img",{staticStyle:{margin:"5px"},attrs:{src:e,width:"90px",height:"90px"}})])}),a("Button",{directives:[{name:"show",rawName:"v-show",value:0!==t.pictures.length,expression:"pictures.length!==0"}],staticClass:"reSelect",attrs:{type:"error",icon:"md-trash"},on:{click:t.remove}},[t._v("清空已选")])],2)},r=[],s=(a("ac6a"),{name:"imgsSelect",props:["value","urls","max"],data:function(){return{pictures:[]}},watch:{urls:function(t){var e=this;t.forEach(function(t){e.pictures.push("http://service.fh.81youxi.com"+t)})}},methods:{getFile:function(t){this.pictures=[];var e=t.target.files;e.length>this.max?this.$Message.error("超过"+this.max+"张,请重新选择"):null!=e&&(this.imgPreview(e),this.$emit("input",e))},remove:function(){this.$emit("input",[]),this.pictures=[]},imgPreview:function(t){var e=this;if(t&&window.FileReader){console.log(t);for(var a=0;a<t.length;a++){var i=t[a];if(/^image/.test(i.type)){var r=new FileReader;r.onloadend=function(t){var a=t.target.result;e.pictures.push(a)},r.readAsDataURL(i)}}console.log(this.imgs)}}}}),n=s,o=(a("ada6"),a("2877")),l=Object(o["a"])(n,i,r,!1,null,"7df03da4",null);l.options.__file="imgsSelect.vue";e["a"]=l.exports},"11bc":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("h3",[t._v("空间信息编辑")]),a("Row",[a("Col",[a("Form",{attrs:{model:t.formData,"label-width":120}},[a("Card",{staticStyle:{"margin-top":"20px"}},[a("Divider",{attrs:{orientation:"left"}},[t._v("基础信息")]),a("FormItem",{staticClass:"formItem",attrs:{label:"空间全称"}},[a("Input",{attrs:{placeholder:"请填写空间全称"},model:{value:t.formData.name,callback:function(e){t.$set(t.formData,"name",e)},expression:"formData.name"}})],1),a("FormItem",{staticClass:"formItem",attrs:{label:"运营团队"}},[a("Select",{model:{value:t.formData.operation_team_id,callback:function(e){t.$set(t.formData,"operation_team_id",e)},expression:"formData.operation_team_id"}},t._l(t.teams,function(t,e){return a("Option",{key:e,attrs:{label:t.name,value:t.id}})}))],1),a("FormItem",{staticClass:"formItem",attrs:{label:"所在地区"}},[a("area-view",{staticStyle:{width:"100%"},attrs:{ids:t.defaultAreas},model:{value:t.areas,callback:function(e){t.areas=e},expression:"areas"}})],1)],1),a("Card",{staticStyle:{"margin-top":"20px"}},[a("Divider",{attrs:{orientation:"left"}},[t._v("介绍资料")]),a("FormItem",{staticClass:"formItem",attrs:{label:"空间简称"}},[a("Input",{attrs:{placeholder:"请填写空间简称"},model:{value:t.formData.short_name,callback:function(e){t.$set(t.formData,"short_name",e)},expression:"formData.short_name"}})],1),a("FormItem",{staticClass:"formItem",attrs:{label:"空间地址"}},[a("Input",{attrs:{placeholder:"请填写空间地址"},model:{value:t.formData.address,callback:function(e){t.$set(t.formData,"address",e)},expression:"formData.address"}})],1),a("FormItem",{staticClass:"formItem",attrs:{label:"空间简介"}},[a("Input",{attrs:{placeholder:"请填写空间简介"},model:{value:t.formData.short_description,callback:function(e){t.$set(t.formData,"short_description",e)},expression:"formData.short_description"}})],1),a("FormItem",{staticClass:"formItem",attrs:{label:"完整介绍"}},[a("Input",{attrs:{type:"textarea",placeholder:"请填写完整介绍"},model:{value:t.formData.description,callback:function(e){t.$set(t.formData,"description",e)},expression:"formData.description"}})],1),a("FormItem",{staticClass:"formItem",attrs:{label:"位置截图(单张)"}},[a("ImgSelect",{attrs:{url:t.formData.position_picture},model:{value:t.position_picture,callback:function(e){t.position_picture=e},expression:"position_picture"}})],1),a("FormItem",{staticClass:"formItem",attrs:{label:"空间照片(最多6张)"}},[a("ImgsSelect",{attrs:{urls:t.formData.space_pictures,max:6},model:{value:t.space_pictures,callback:function(e){t.space_pictures=e},expression:"space_pictures"}})],1),a("FormItem",{staticClass:"formItem"},[a("Button",{attrs:{type:"success",long:""},on:{click:t.submit}},[t._v("提交")])],1)],1)],1),t.load?a("Spin",{attrs:{size:"large",fix:""}}):t._e()],1)],1)],1)},r=[],s=(a("7f7f"),a("d371")),n=a("8443"),o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"area"},[a("Select",{staticStyle:{width:"32%"},on:{"on-change":t.selectProvince},model:{value:t.provinceSelect,callback:function(e){t.provinceSelect=e},expression:"provinceSelect"}},t._l(t.province,function(t){return a("Option",{key:t.id,attrs:{label:t.name,value:t.id}})})),a("Select",{staticStyle:{"margin-left":"2%",width:"32%"},on:{"on-change":t.selectCity},model:{value:t.citySelect,callback:function(e){t.citySelect=e},expression:"citySelect"}},t._l(t.city,function(t){return a("Option",{key:t.id,attrs:{label:t.name,value:t.id}})})),a("Select",{staticStyle:{"margin-left":"2%",width:"32%"},on:{"on-change":t.selectArea},model:{value:t.areaSelect,callback:function(e){t.areaSelect=e},expression:"areaSelect"}},t._l(t.area,function(t){return a("Option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1)},l=[],c=a("c665"),u=a("dc0a"),f=a("aa9a"),d=a("d328"),m=a("11d9"),p=a("4a2d"),h=function(t){function e(){return Object(c["a"])(this,e),Object(d["a"])(this,Object(m["a"])(e).apply(this,arguments))}return Object(f["a"])(e,null,[{key:"index",value:function(t,e,a){p["a"].request(this.uri()+"index",e,a,t)}},{key:"uri",value:function(){return p["a"].url()+"area/"}}]),Object(u["a"])(e,t),e}(p["a"]),v={name:"areaView",props:["value","ids"],data:function(){return{province:[],provinceSelect:"",city:[],area:[],citySelect:"",areaSelect:""}},watch:{ids:function(t){console.log(t),console.log("--------"),this.selectProvince(parseInt(t[0])),this.selectCity(parseInt(t[1])),this.provinceSelect=parseInt(t[0]),this.citySelect=parseInt(t[1]),this.areaSelect=parseInt(t[2])}},mounted:function(){this.loadData()},methods:{loadData:function(){var t=this;h.index({level:"1"},function(e){t.province=e.data.data})},selectCity:function(t){var e=this;this.areaSelect=null,this.area=[],void 0!==t&&h.index({level:"3",id:t},function(t){e.area=t.data.data})},selectProvince:function(t){var e=this;this.citySelect=null,this.city=[],h.index({level:"2",id:t},function(t){e.city=t.data.data})},selectArea:function(t){var e=[this.provinceSelect,this.citySelect,t];this.$emit("input",e),console.log(t)}}},_=v,y=(a("eb87"),a("2877")),b=Object(y["a"])(_,o,l,!1,null,"3dc88dd4",null);b.options.__file="areaView.vue";var D=b.exports,g=a("0b12"),S=a("c2c2"),w={name:"edit",components:{AreaView:D,ImgSelect:S["a"],ImgsSelect:g["a"]},data:function(){return{formData:{},areas:[],defaultAreas:[],teams:[],roles:[],departments:[],load:!1,position_picture:null,space_pictures:null}},mounted:function(){this.loadTeam(),null!=this.$route.query.id&&this.loadData()},methods:{loadTeam:function(){var t=this;s["a"].select(function(e){console.assert(e),t.teams=e.data.data})},loadData:function(){var t=this;this.load=!0,n["a"].detail({id:this.$route.query.id},function(e){t.load=!1,t.formData=e.data.data,t.defaultAreas=[t.formData.province.id,t.formData.city.id,t.formData.district.id],t.formData.province_id=t.formData.province.id,t.formData.city_id=t.formData.city.id,t.formData.district_id=t.formData.district.id,t.formData.operation_team_id=t.formData.operation_team.id},function(){t.load=!1})},submit:function(){var t=this;if(this.$formUtil.isStrValid(this.formData.name))if(this.$formUtil.isStrValid(this.formData.operation_team_id)){if(0!==this.areas.length)this.formData.province_id=this.areas[0],this.formData.city_id=this.areas[1],this.formData.district_id=this.areas[2];else if(!this.$formUtil.isStrValid(this.formData.province_id)||!this.$formUtil.isStrValid(this.formData.city_id)||!this.$formUtil.isStrValid(this.formData.district_id))return void this.$Message.error("请选择地区");if(this.$formUtil.isStrValid(this.formData.short_name))if(this.$formUtil.isStrValid(this.formData.address))if(this.$formUtil.isStrValid(this.formData.short_description))if(this.$formUtil.isStrValid(this.formData.description))if(this.$formUtil.isStrValid(this.formData.address)){var e=this.$formUtil.objToFormData(this.formData);if(null!=this.position_picture||this.$formUtil.isStrValid(this.formData.position_picture))if(null!=this.position_picture&&e.append("position_picture",this.position_picture),null!=this.space_pictures||this.$formUtil.isStrValid(this.formData.space_pictures)){if(null!=this.space_pictures)for(var a=0;a<this.space_pictures.length;a++)e.append("space_pictures["+a+"]",this.space_pictures[a]);console.log(e),this.load=!0,n["a"].save(e,function(e){t.load=!1,t.$router.push({name:"space"})},function(){t.load=!1})}else this.$Message.error("请选择空间照片");else this.$Message.error("请选择位置截图")}else this.$Message.error("请输入空间地址");else this.$Message.error("请输入空间完整介绍");else this.$Message.error("请输入空间简介");else this.$Message.error("请输入空间地址");else this.$Message.error("请输入空间简称")}else this.$Message.error("请选择运营团队");else this.$Message.error("请输入空间全称")}}},x=w,k=(a("f412"),Object(y["a"])(x,i,r,!1,null,"091c9017",null));k.options.__file="edit.vue";e["default"]=k.exports},"11d9":function(t,e,a){"use strict";function i(t){return i=Object.getPrototypeOf||function(t){return t.__proto__},i(t)}a.d(e,"a",function(){return i})},2236:function(t,e,a){},"239f":function(t,e,a){},8443:function(t,e,a){"use strict";a.d(e,"a",function(){return n});var i=a("c665"),r=a("aa9a"),s=a("4a2d"),n=function(){function t(){Object(i["a"])(this,t)}return Object(r["a"])(t,null,[{key:"index",value:function(t,e,a){s["a"].request(this.uri()+"index",e,a,t)}},{key:"save",value:function(t,e,a){s["a"].request(this.uri()+"save",e,a,t)}},{key:"detail",value:function(t,e,a){s["a"].request(this.uri()+"detail",e,a,t)}},{key:"delete",value:function(t,e,a){s["a"].request(this.uri()+"delete",e,a,t)}},{key:"select",value:function(t,e){s["a"].request(this.uri()+"select",t,e)}},{key:"uri",value:function(){return s["a"].url()+"space/"}}]),t}()},ada6:function(t,e,a){"use strict";var i=a("2236"),r=a.n(i);r.a},d328:function(t,e,a){"use strict";var i=a("6bde");function r(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function s(t,e){return!e||"object"!==Object(i["a"])(e)&&"function"!==typeof e?r(t):e}a.d(e,"a",function(){return s})},d371:function(t,e,a){"use strict";a.d(e,"a",function(){return n});var i=a("c665"),r=a("aa9a"),s=a("4a2d"),n=function(){function t(){Object(i["a"])(this,t)}return Object(r["a"])(t,null,[{key:"select",value:function(t,e){s["a"].request(this.uri()+"select",t,e)}},{key:"index",value:function(t,e,a){s["a"].request(this.uri()+"index",e,a,t)}},{key:"save",value:function(t,e,a){s["a"].request(this.uri()+"save",e,a,t)}},{key:"delete",value:function(t,e,a){s["a"].request(this.uri()+"delete",e,a,t)}},{key:"detail",value:function(t,e,a){s["a"].request(this.uri()+"detail",e,a,t)}},{key:"leader",value:function(t,e,a){s["a"].request(this.uri()+"leader",e,a,t)}},{key:"flowDesign",value:function(t,e,a){s["a"].request(this.uri()+"flow_design",e,a,t)}},{key:"flowList",value:function(t,e,a){s["a"].request(this.uri()+"flow_list",e,a,t)}},{key:"uri",value:function(){return s["a"].url()+"operation_team/"}}]),t}()},dc0a:function(t,e,a){"use strict";function i(t,e){return i=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},i(t,e)}function r(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");i(t.prototype,e&&e.prototype),e&&i(t,e)}a.d(e,"a",function(){return r})},e321:function(t,e,a){},eb87:function(t,e,a){"use strict";var i=a("e321"),r=a.n(i);r.a},f412:function(t,e,a){"use strict";var i=a("239f"),r=a.n(i);r.a}}]);
//# sourceMappingURL=chunk-086b5b88.7a472243.js.map