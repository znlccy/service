(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-43c1b91e"],{"0773":function(e,i,n){},"11d9":function(e,i,n){"use strict";function t(e){return t=Object.getPrototypeOf||function(e){return e.__proto__},t(e)}n.d(i,"a",function(){return t})},6544:function(e,i,n){"use strict";n.d(i,"a",function(){return u});var t=n("c665"),s=n("dc0a"),c=n("aa9a"),o=n("d328"),r=n("11d9"),a=n("4a2d"),u=function(e){function i(){return Object(t["a"])(this,i),Object(o["a"])(this,Object(r["a"])(i).apply(this,arguments))}return Object(c["a"])(i,null,[{key:"roleList",value:function(e,i,n){a["a"].request(this.uri()+"role_list",i,n,e)}},{key:"add",value:function(e,i,n){a["a"].request(this.uri()+"add",i,n,e)}},{key:"delete",value:function(e,i,n){a["a"].request(this.uri()+"delete",i,n,e)}},{key:"detail",value:function(e,i,n){a["a"].request(this.uri()+"detail",i,n,e)}},{key:"permissions",value:function(e,i,n){a["a"].request(this.uri()+"get_role_permission",i,n,e)}},{key:"assignRolePermission",value:function(e,i,n){a["a"].request(this.uri()+"assign_role_permission",i,n,e)}},{key:"uri",value:function(){return a["a"].url()+"role/"}}]),Object(s["a"])(i,e),i}(a["a"])},"73f2":function(e,i,n){"use strict";n.r(i);var t=function(){var e=this,i=e.$createElement,n=e._self._c||i;return n("div",[n("h3",[e._v(" 角色授权")]),n("Divider",{attrs:{orientation:"left"}},[e._v("选择角色权限")]),n("Row",[n("Col",{attrs:{xs:24,sm:24,md:12,lg:12}},[n("Form",{ref:"form",attrs:{"label-width":80}},[n("FormItem",{attrs:{label:"权限"}},[e._l(e.permissions,function(i,t){return n("div",{key:i.id},[n("checkbox",{on:{"on-change":function(i){e.checkChange(e.permissions[t])}},model:{value:i.checked,callback:function(n){e.$set(i,"checked",n)},expression:"permission.checked"}},[e._v(e._s(i.name)+"\n                        ")]),e._l(e.permissions[t].child,function(i,s){return n("div",{key:i.id,staticStyle:{"margin-left":"50px"}},[n("Checkbox",{on:{"on-change":function(i){e.checkChange(e.permissions[t].child[s],e.permissions[t])}},model:{value:i.checked,callback:function(n){e.$set(i,"checked",n)},expression:"child.checked"}},[e._v(e._s(i.name)+"\n                            ")]),n("div",{staticStyle:{"margin-left":"20px"}},e._l(e.permissions[t].child[s].child,function(i,c){return n("Checkbox",{key:i.id,on:{"on-change":function(i){e.checkChange(e.permissions[t].child[s].child[c],e.permissions[t].child[s],e.permissions[t])}},model:{value:i.checked,callback:function(n){e.$set(i,"checked",n)},expression:"item.checked"}},[e._v("\n                                    "+e._s(i.name)+"\n                                ")])}))],1)})],2)}),n("Button",{staticStyle:{"margin-left":"50px"},attrs:{type:"primary"},on:{click:e.onSubmitPer}},[e._v("提交\n                    ")]),n("Button",{staticStyle:{"margin-left":"50px"},attrs:{plain:""},on:{click:function(i){e.$router.back()}}},[e._v("返回\n                    ")])],2)],1),e.isLoading?n("Spin",{attrs:{size:"large",fix:""}}):e._e()],1)],1)],1)},s=[],c=(n("ac6a"),n("6544")),o={name:"rolePer",data:function(){return{permissionsData:{},permissions:{},isLoading:!1,permission_id:[]}},mounted:function(){this.loadPermission()},methods:{loadPermission:function(){var e=this;this.isLoading=!0,c["a"].permissions({id:this.$route.params.id},function(i){e.isLoading=!1,e.permissions=i.data.data,e.initCheck(e.permissions)},function(){e.isLoading=!1})},initCheck:function(e){var i=this;e.forEach(function(e){e.checked=1===e.role_status,null!=e.child&&i.initCheck(e.child)})},setCheck:function(e,i){var n=this;e.forEach(function(e){e.role_status=i,e.checked=1===i,null!=e.child&&n.setCheck(e.child,i)})},onSubmitPer:function(){var e=this;this.setPermissionId(this.permissions);var i={id:this.$route.params.id,permission_id:this.permission_id};this.isLoading=!0,c["a"].assignRolePermission(i,function(){e.isLoading=!1,e.$Message.success("授权成功"),e.$router.push({name:"role"})},function(){e.isLoading=!1})},setPermissionId:function(e){var i=this;e.forEach(function(e){e.checked&&(i.permission_id.push(e.id),null!=e.child&&i.setPermissionId(e.child))})},checkChange:function(e,i,n){var t=this,s=e.checked?1:0;e.role_status=s,e.checked=1===s,null!=e.child&&this.setCheck(e.child,s),e.checked&&(null!=i&&(i.checked=!0,i.role_status=1),null!=n&&(n.checked=!0,n.role_status=1));var c=this.permissions;this.permissions=[],this.$nextTick(function(){t.permissions=c})}}},r=o,a=(n("ccad"),n("2877")),u=Object(a["a"])(r,t,s,!1,null,"207973b2",null);u.options.__file="permission.vue";i["default"]=u.exports},ccad:function(e,i,n){"use strict";var t=n("0773"),s=n.n(t);s.a},d328:function(e,i,n){"use strict";var t=n("6bde");function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e,i){return!i||"object"!==Object(t["a"])(i)&&"function"!==typeof i?s(e):i}n.d(i,"a",function(){return c})},dc0a:function(e,i,n){"use strict";function t(e,i){return t=Object.setPrototypeOf||function(e,i){return e.__proto__=i,e},t(e,i)}function s(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Super expression must either be null or a function");t(e.prototype,i&&i.prototype),i&&t(e,i)}n.d(i,"a",function(){return s})}}]);
//# sourceMappingURL=chunk-43c1b91e.23e7ea22.js.map