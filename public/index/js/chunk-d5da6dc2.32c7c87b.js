(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d5da6dc2"],{3519:function(t,e,a){"use strict";var i=a("7652"),n=a.n(i);n.a},7652:function(t,e,a){},ac6a:function(t,e,a){for(var i=a("cadf"),n=a("0d58"),r=a("2aba"),o=a("7726"),l=a("32e9"),s=a("84f2"),c=a("2b4c"),u=c("iterator"),p=c("toStringTag"),d=s.Array,f={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},m=n(f),g=0;g<m.length;g++){var h,v=m[g],b=f[v],k=o[v],D=k&&k.prototype;if(D&&(D[u]||l(D,u,d),D[p]||l(D,p,v),s[v]=d,b))for(h in i)D[h]||r(D,h,i[h],!0)}},eca3:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Row",[a("Col",{attrs:{span:12}},[a("h2",[t._v("报修管理")])]),a("Col",{staticStyle:{"text-align":"right"},attrs:{span:12}},[a("Button",{attrs:{size:"large",type:"info"},on:{click:function(e){t.showDialog=!0}}},[t._v(" 我要报修")])],1)],1),a("Divider"),a("Table",{attrs:{stripe:"",border:"",columns:t.columns,data:t.listData.data}}),t.load?a("Spin",{attrs:{size:"large",fix:""}}):t._e(),t.listData.last_page>1?a("Row",{staticStyle:{"text-align":"center","margin-top":"20px"}},[a("Page",{attrs:{total:t.listData.total,"page-size":t.listData.per_page,current:t.listData.current_page,size:"small"},on:{"on-change":t.loadData}})],1):t._e(),a("Modal",{attrs:{title:"新增保修",loading:t.loading},model:{value:t.showDialog,callback:function(e){t.showDialog=e},expression:"showDialog"}},[a("Form",{attrs:{model:t.repair,"label-width":80}},[a("FormItem",{attrs:{label:"描述"}},[a("Input",{attrs:{type:"textarea",rows:5,placeholder:"请填写文字描述"},model:{value:t.repair.description,callback:function(e){t.$set(t.repair,"description",e)},expression:"repair.description"}})],1),a("FormItem",{attrs:{label:"设备"}},[a("Select",{model:{value:t.repair.equipment_no,callback:function(e){t.$set(t.repair,"equipment_no",e)},expression:"repair.equipment_no"}},t._l(t.equipments,function(t,e){return a("Option",{key:e,attrs:{value:t.equipment_no,label:t.name}})}))],1),a("FormItem",{attrs:{label:"报修人"}},[a("Input",{attrs:{placeholder:"请填写报修人"},model:{value:t.repair.repair_man,callback:function(e){t.$set(t.repair,"repair_man",e)},expression:"repair.repair_man"}})],1),a("FormItem",{attrs:{label:"联系电话"}},[a("Input",{attrs:{placeholder:"请填写联系电话"},model:{value:t.repair.mobile,callback:function(e){t.$set(t.repair,"mobile",e)},expression:"repair.mobile"}})],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{on:{click:function(e){t.showDialog=!1}}},[t._v("取消")]),a("Button",{attrs:{loading:t.loading,type:"info"},on:{click:t.submitData}},[t._v("确认")])],1)],1)],1)},n=[],r=(a("ac6a"),a("c665")),o=a("aa9a"),l=a("4a2d"),s=function(){function t(){Object(r["a"])(this,t)}return Object(o["a"])(t,null,[{key:"index",value:function(t,e,a){l["a"].request(this.uri()+"index",e,a,t)}},{key:"save",value:function(t,e,a){l["a"].request(this.uri()+"save",e,a,t)}},{key:"detail",value:function(t,e,a){l["a"].request(this.uri()+"detail",e,a,t)}},{key:"cancel",value:function(t,e,a){l["a"].request(this.uri()+"cancel",e,a,t)}},{key:"select",value:function(t,e){l["a"].request(l["a"].url()+"equipment/select",t,e)}},{key:"uri",value:function(){return l["a"].url()+"repair/"}}]),t}(),c={data:function(){var t=this;return{listData:[],formData:{},repair:{},equipments:[],load:!1,showDialog:!1,loading:!1,columns:[{title:"报修描述",align:"center",key:"description"},{title:"设备 ID",align:"center",key:"equipment_no"},{title:"报修日期",align:"center",key:"create_time"},{title:"报修人",align:"center",key:"repair_man"},{title:"联系电话",align:"center",key:"mobile"},{title:"状态",align:"center",render:function(t,e){var a;switch(e.row.status){case 0:a="待确认";break;case 1:a="已结束";break}return t("span",a)}},{title:"操作",align:"center",render:function(e,a){return e("Button",{props:{size:"small"},style:{marginRight:"5px",display:2===a.row.status?"none":""},on:{click:function(){t.cancel(a.row.id)}}},"取消")}}]}},mounted:function(){this.loadData(),this.loadSelect()},methods:{loadSelect:function(){var t=this;s.select(function(e){t.equipments=e.data.data})},loadData:function(t){var e=this;t&&(this.formData.jump_page=t),this.load=!0,s.index(this.formData,function(t){e.load=!1,e.listData=t.data.data},function(){e.load=!1})},cancel:function(t){var e=this;this.$Modal.confirm({title:"确定取消报修吗?",okText:"确定",cancelText:"返回",loading:!0,onOk:function(){s.cancel({id:t},function(){e.$Modal.remove(),e.$Message.success("取消成功"),e.loadData()},function(){e.$Modal.remove()})}})},getTime:function(t){var e=this,a=[];return t.forEach(function(t){a+=e.times[parseInt(t)].label+"<br/>"}),a},submitData:function(){var t=this;this.loading=!0,s.save(this.repair,function(e){t.loading=!1,t.showDialog=!1,t.loadData(),t.$Message.success("保修成功")},function(){t.loading=!1})}}},u=c,p=(a("3519"),a("2877")),d=Object(p["a"])(u,i,n,!1,null,"5d6faff4",null);d.options.__file="index.vue";e["default"]=d.exports}}]);
//# sourceMappingURL=chunk-d5da6dc2.32c7c87b.js.map